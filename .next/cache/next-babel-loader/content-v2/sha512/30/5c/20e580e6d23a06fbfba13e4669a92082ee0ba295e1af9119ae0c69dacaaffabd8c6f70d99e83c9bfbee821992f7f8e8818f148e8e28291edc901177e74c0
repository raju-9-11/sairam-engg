{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/home/pacman/Desktop/nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/home/pacman/Desktop/nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Box from '@material-ui/core/Box';\nimport Avatar from '@material-ui/core/Avatar';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { useAuth } from '../lib/auth';\nimport firebase from '../lib/firebase';\nimport { useSnackbar } from 'notistack';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { Button } from '@material-ui/core';\nimport { getFields } from '../lib/db';\nimport { checkExp, checkname } from '../lib/func';\nvar useStyles = makeStyles(function (theme) {\n  var _root;\n\n  return {\n    root: (_root = {\n      marginTop: '3vh',\n      flexGrow: 1\n    }, _defineProperty(_root, theme.breakpoints.up('sm'), _defineProperty({}, theme.breakpoints.down('md'), {\n      paddingLeft: '20vh'\n    })), _defineProperty(_root, \"paddingBottom\", '10vh'), _defineProperty(_root, \"display\", 'flex'), _defineProperty(_root, \"flexDirection\", 'column'), _defineProperty(_root, \"alignItems\", 'center'), _root),\n    paper: {\n      height: '100%',\n      marginLeft: '4vh'\n    },\n    control: {\n      padding: theme.spacing(2)\n    },\n    form: {\n      paddingTop: '7vh',\n      paddingRight: '7vh'\n    },\n    button: {\n      marginTop: '3vh'\n    },\n    box: {\n      padding: '10vh',\n      paddingTop: '25vh'\n    }\n  };\n});\nexport default function Profileupdate() {\n  var classes = useStyles();\n\n  var _React$useState = React.useState(4),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      spacing = _React$useState2[0],\n      setSpacing = _React$useState2[1];\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var _useState = useState(true),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(''),\n      firstName = _useState2[0],\n      setFirstName = _useState2[1];\n\n  var _useState3 = useState(''),\n      lastName = _useState3[0],\n      setLastName = _useState3[1];\n\n  var _useState4 = useState(''),\n      cid = _useState4[0],\n      setCid = _useState4[1];\n\n  var _useState5 = useState(''),\n      email = _useState5[0],\n      setEmail = _useState5[1];\n\n  var _useState6 = useState(0),\n      years = _useState6[0],\n      setYears = _useState6[1];\n\n  var _useAuth = useAuth(),\n      user = _useAuth.user;\n\n  var firestore = firebase.firestore();\n\n  var _useState7 = useState(''),\n      expError = _useState7[0],\n      setExpError = _useState7[1];\n\n  var _useState8 = useState(''),\n      fnameError = _useState8[0],\n      setFnameError = _useState8[1];\n\n  var _useState9 = useState(''),\n      lnameError = _useState9[0],\n      setLnameError = _useState9[1]; // const [ password, setPassword ] = useState('');\n  // const [ final, setFinal ] = useState('');\n  // const [ foe, setFoe ] = useState('---Select---');\n\n\n  var handleUpdate = function handleUpdate() {\n    setFnameError(checkname(firstName));\n    setLnameError(checkname(lastName));\n    setExpError(checkExp(years));\n    console.log(years);\n\n    if (fnameError === '' && lnameError === '' && expError === '') {\n      firestore.collection('users').doc(user.uid).set({\n        name: firstName,\n        firstName: firstName,\n        lastName: lastName,\n        experience: years\n      }, {\n        merge: true\n      }).then(function (response) {\n        enqueueSnackbar('User details succesfully updated', {\n          variant: 'success'\n        });\n      })[\"catch\"](function (err) {\n        enqueueSnackbar('Error occured while updating');\n      });\n    }\n\n    var fireUser = firebase.auth().currentUser;\n    fireUser.updateProfile({\n      displayName: firstName\n    });\n  };\n\n  useEffect(function () {\n    if (user) {\n      try {\n        firestore.collection('users').doc(user.uid).onSnapshot(function (doc) {\n          setEmail(doc.data().email);\n          setFirstName(doc.data().first_name);\n          setLastName(doc.data().last_name);\n          setCid(doc.data().cid);\n          setYears(doc.data().years || 0);\n          setLoading(false);\n        });\n      } catch (e) {\n        console.log(e); // enqueueSnackbar('Error fetching Data',{variant: 'error'})\n      }\n\n      if (!user && firstName == '') {\n        enqueueSnackbar('Error fetching Data', {\n          variant: 'error'\n        });\n      }\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsx(\"div\", {\n    children: /*#__PURE__*/_jsx(Grid, {\n      container: true,\n      className: classes.root,\n      spacing: 2,\n      children: /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsx(Grid, {\n          container: true,\n          justify: \"center\",\n          spacing: spacing,\n          children: [0, 1].map(function (value, index) {\n            return /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxs(Paper, {\n                className: classes.paper,\n                children: [loading && /*#__PURE__*/_jsx(LinearProgress, {}), index == 0 ? /*#__PURE__*/_jsxs(Container, {\n                  component: \"main\",\n                  maxWidth: \"sm\",\n                  className: classes.root,\n                  children: [/*#__PURE__*/_jsx(CssBaseline, {}), /*#__PURE__*/_jsxs(Box, {\n                    className: classes.form,\n                    children: [/*#__PURE__*/_jsx(Avatar, {\n                      sx: {\n                        m: 1,\n                        bgcolor: 'secondary.main'\n                      },\n                      children: /*#__PURE__*/_jsx(AccountCircleIcon, {})\n                    }), /*#__PURE__*/_jsx(Typography, {\n                      component: \"h1\",\n                      variant: \"h5\",\n                      children: \"Personal Details\"\n                    }), /*#__PURE__*/_jsx(Box, {\n                      className: classes.button,\n                      component: \"form\",\n                      noValidate: true,\n                      sx: {\n                        width: '100%',\n                        // Fix IE11 issue.\n                        mt: 3\n                      },\n                      children: /*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 5,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          sm: 6,\n                          children: /*#__PURE__*/_jsx(TextField, {\n                            autoComplete: \"fname\",\n                            name: \"firstName\",\n                            required: true,\n                            fullWidth: true,\n                            id: \"firstName\",\n                            label: \"First Name\",\n                            value: firstName,\n                            error: fnameError != '',\n                            helperText: fnameError,\n                            onChange: function onChange(Event) {\n                              return setFirstName(Event.target.value);\n                            },\n                            autoFocus: true,\n                            variant: \"outlined\"\n                          })\n                        }), /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          sm: 6,\n                          children: /*#__PURE__*/_jsx(TextField, {\n                            required: true,\n                            fullWidth: true,\n                            id: \"lastName\",\n                            label: \"Last Name\",\n                            value: lastName,\n                            error: lnameError != '',\n                            helperText: lnameError,\n                            onChange: function onChange(Event) {\n                              return setLastName(Event.target.value);\n                            },\n                            name: \"lastName\",\n                            autoComplete: \"lname\",\n                            variant: \"outlined\"\n                          })\n                        }), /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsx(TextField, {\n                            required: true,\n                            fullWidth: true,\n                            id: \"email\",\n                            label: \"Email Address\",\n                            disabled: true,\n                            name: \"email\",\n                            value: email,\n                            onChange: function onChange(Event) {\n                              return setEmail(Event.target.value);\n                            },\n                            autoComplete: \"email\",\n                            variant: \"outlined\"\n                          })\n                        })]\n                      })\n                    })]\n                  })]\n                }) : /*#__PURE__*/_jsxs(Container, {\n                  component: \"main\",\n                  maxWidth: \"sm\",\n                  className: classes.root,\n                  children: [/*#__PURE__*/_jsx(CssBaseline, {}), /*#__PURE__*/_jsxs(Box, {\n                    className: classes.form,\n                    children: [/*#__PURE__*/_jsx(Avatar, {\n                      sx: {\n                        m: 1,\n                        bgcolor: 'secondary.main'\n                      },\n                      children: /*#__PURE__*/_jsx(PersonIcon, {})\n                    }), /*#__PURE__*/_jsx(Typography, {\n                      component: \"h1\",\n                      variant: \"h5\",\n                      children: \"Professional Details\"\n                    }), /*#__PURE__*/_jsx(Box, {\n                      className: classes.button,\n                      component: \"form\",\n                      noValidate: true,\n                      sx: {\n                        width: '100%',\n                        // Fix IE11 issue.\n                        mt: 3\n                      },\n                      children: /*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 5,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsx(TextField, {\n                            autoComplete: \"cid\",\n                            name: \"collegeId\" // required\n                            ,\n                            fullWidth: true,\n                            disabled: true,\n                            id: \"clgid\",\n                            value: cid,\n                            label: \"College ID\",\n                            autoFocus: true,\n                            variant: \"outlined\"\n                          })\n                        }), /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsx(TextField, {\n                            required: true,\n                            fullWidth: true,\n                            name: \"experience\",\n                            label: \"Years of Experience\",\n                            id: \"exp\",\n                            error: expError != '',\n                            helperText: expError,\n                            value: years,\n                            onChange: function onChange(Event) {\n                              return setYears(Event.target.value);\n                            },\n                            type: \"number\",\n                            autoComplete: \"exp\",\n                            variant: \"outlined\"\n                          })\n                        })]\n                      })\n                    }), /*#__PURE__*/_jsx(Button, {\n                      type: \"submit\",\n                      fullWidth: true,\n                      variant: \"contained\",\n                      sx: {\n                        mt: 3,\n                        mb: 2\n                      },\n                      className: classes.button,\n                      onClick: handleUpdate,\n                      children: \"Update Details\"\n                    })]\n                  })]\n                })]\n              })\n            }, value);\n          })\n        })\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}