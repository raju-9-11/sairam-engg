{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/home/pacman/Desktop/nextjs/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/pacman/Desktop/nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/pacman/Desktop/nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Box from '@material-ui/core/Box';\nimport { useSnackbar } from 'notistack';\nimport AlignItemsList from './listview';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport firebase from '../lib/firebase';\nimport Fuse from 'fuse.js';\nimport Button from '@material-ui/core/Button';\nimport { getFields, getSkills } from '../lib/db';\nimport { checkSkill } from '../lib/func';\nvar useStyles = makeStyles(function (theme) {\n  var _root;\n\n  return {\n    text: {\n      width: '25vh'\n    },\n    root: (_root = {\n      marginTop: '6vh',\n      flexGrow: 1\n    }, _defineProperty(_root, theme.breakpoints.up('sm'), _defineProperty({}, theme.breakpoints.down('md'), {\n      paddingLeft: '20vh'\n    })), _defineProperty(_root, \"paddingBottom\", '10vh'), _defineProperty(_root, \"display\", 'flex'), _defineProperty(_root, \"flexDirection\", 'column'), _root),\n    paper: {\n      height: '100%',\n      marginLeft: '4vh'\n    },\n    control: {\n      padding: theme.spacing(2)\n    },\n    form: {\n      paddingTop: '7vh',\n      paddingRight: '7vh'\n    },\n    button1: {\n      marginTop: '3vh',\n      width: '90%'\n    },\n    button: {\n      marginTop: '3vh'\n    },\n    box: {\n      padding: '10vh',\n      paddingTop: '25vh'\n    }\n  };\n});\nexport default function Filter() {\n  var classes = useStyles(); // const [ cid, setCid ] = useState('');\n\n  var _useState = useState([]),\n      skills = _useState[0],\n      setSkills = _useState[1];\n\n  var _useState2 = useState([]),\n      fields = _useState2[0],\n      setFields = _useState2[1];\n\n  var _useState3 = useState('---Select---'),\n      foe = _useState3[0],\n      setFoe = _useState3[1];\n\n  var _useState4 = useState([]),\n      filtered = _useState4[0],\n      setFiltered = _useState4[1];\n\n  var _useState5 = useState('---Select---'),\n      skill = _useState5[0],\n      setSkill = _useState5[1];\n\n  var _useState6 = useState([]),\n      users = _useState6[0],\n      setUsers = _useState6[1];\n\n  var _useState7 = useState(0),\n      sp = _useState7[0],\n      setSp = _useState7[1];\n\n  var _useState8 = useState(0),\n      fp = _useState8[0],\n      setFp = _useState8[1];\n\n  var _useState9 = useState(0),\n      years = _useState9[0],\n      setYears = _useState9[1];\n\n  var _useState10 = useState(' '),\n      spError = _useState10[0],\n      setSpError = _useState10[1];\n\n  var _useState11 = useState(''),\n      fpError = _useState11[0],\n      setFpError = _useState11[1];\n\n  var _useState12 = useState(''),\n      skillError = _useState12[0],\n      setSkillError = _useState12[1];\n\n  var _useState13 = useState(''),\n      fieldError = _useState13[0],\n      setFieldError = _useState13[1];\n\n  var firestore = firebase.firestore();\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var getFID = function getFID() {\n    try {\n      return fields.find(function (element) {\n        return element.name === foe;\n      }).id || '';\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  var getSID = function getSID() {\n    try {\n      return skills.find(function (element) {\n        return element.name === skill;\n      }).id || '';\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  var handleGet = function handleGet() {\n    // setSkillError(checkSkill(skill));\n    // setFieldError(checkSkill(foe));\n    setFpError(fp > -1 && fp < 6 ? '' : 'Valid points(0-5)');\n    setSpError(sp > -1 && sp < 6 ? '' : 'Valid points(0-5)');\n\n    if (foe != '---Select---') {\n      if (fp < 0 || fp > 6) {\n        return;\n      }\n\n      var fid = getFID();\n      var fuse = new Fuse(users, {\n        includeScore: true,\n        useExtendedSearch: true,\n        keys: [\"\".concat(fid, \".points\")]\n      });\n      var data = fuse.search(\"=\".concat(fp));\n\n      if (skill != '---Select---') {\n        if (sp < 0 || sp > 6) {\n          return;\n        }\n\n        var sid = getSID();\n        var sfuse = new Fuse(data, {\n          includeScore: true,\n          useExtendedSearch: true,\n          keys: [\"\".concat(sid, \".points\")]\n        });\n\n        var _final = sfuse.search(\"=\".concat(sp));\n\n        if (_final.length < 1) {\n          enqueueSnackbar(\"No Users Available\");\n          setFiltered([]);\n        } else {\n          setFiltered(_final);\n        }\n\n        return;\n      }\n\n      if (data.length < 1) {\n        enqueueSnackbar(\"No Users Available\");\n        setFiltered([]);\n      } else {\n        setFiltered(data);\n      }\n\n      return;\n    }\n\n    if (skill != '---Select---') {\n      if (sp < 0 || sp > 6) {\n        return;\n      }\n\n      var _sid = getSID();\n\n      var _sfuse = new Fuse(users, {\n        includeScore: true,\n        useExtendedSearch: true,\n        keys: [\"\".concat(_sid, \".points\")]\n      });\n\n      var _final2 = _sfuse.search(\"=\".concat(sp));\n\n      if (_final2.length < 1) {\n        setFiltered([]);\n      } else {\n        setFiltered(_final2);\n      }\n\n      return;\n    }\n\n    enqueueSnackbar(\"Select a category to filter\");\n  };\n\n  var getData = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            getFields().then(function (response) {\n              var lst = [];\n              response.forEach(function (dat) {\n                lst.push(_objectSpread({\n                  id: dat.id\n                }, dat.data()));\n              });\n              setFields(lst);\n            });\n            getSkills().then(function (response) {\n              var lst = [];\n              response.forEach(function (dat) {\n                lst.push(_objectSpread({\n                  id: dat.id\n                }, dat.data()));\n              });\n              setSkills(lst);\n            });\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })));\n  useEffect(function () {\n    firestore.collection('users').get().then(function (response) {\n      var lst = [];\n      response.forEach(function (user) {\n        lst.push(user.data());\n      });\n      setUsers(lst);\n    });\n    getData();\n  }, []);\n\n  var handleFieldChange = function handleFieldChange(event) {\n    setFoe(event.target.value);\n  };\n\n  var handleSkillChange = function handleSkillChange(event) {\n    setSkill(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(Grid, {\n      container: true,\n      className: classes.root,\n      spacing: 2,\n      children: /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsx(Grid, {\n          container: true,\n          justify: \"center\",\n          spacing: 4,\n          children: [0, 1].map(function (value, index) {\n            return /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsx(Paper, {\n                className: classes.paper,\n                children: index == 0 ? /*#__PURE__*/_jsxs(Container, {\n                  component: \"main\",\n                  maxWidth: \"sm\",\n                  className: classes.root,\n                  children: [/*#__PURE__*/_jsx(CssBaseline, {}), /*#__PURE__*/_jsxs(Box, {\n                    className: classes.form,\n                    children: [/*#__PURE__*/_jsx(Typography, {\n                      component: \"h1\",\n                      variant: \"h5\",\n                      children: \"Filter\"\n                    }), /*#__PURE__*/_jsx(Box, {\n                      component: \"form\",\n                      className: classes.button,\n                      noValidate: true,\n                      sx: {\n                        width: '100%',\n                        // Fix IE11 issue.\n                        mt: 3\n                      },\n                      children: /*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 5,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsxs(TextField, {\n                            select: true,\n                            fullWidth: true,\n                            label: \"Select a Field\",\n                            value: foe,\n                            onChange: handleFieldChange,\n                            error: fieldError != '',\n                            helperText: fieldError,\n                            variant: \"outlined\",\n                            children: [/*#__PURE__*/_jsx(MenuItem, {\n                              value: '---Select---',\n                              children: '---Select---'\n                            }, '12'), fields.map(function (option) {\n                              return /*#__PURE__*/_jsx(MenuItem, {\n                                value: option.name,\n                                children: option.name\n                              }, option.id);\n                            })]\n                          })\n                        }), /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsx(TextField, {\n                            required: true,\n                            fullWidth: true,\n                            name: \"experience\",\n                            label: \"Years of Experience\",\n                            helperText: \"Enter the number of years\",\n                            value: years,\n                            onChange: function onChange(Event) {\n                              return setYears(Event.target.value);\n                            },\n                            id: \"exp\",\n                            type: \"number\",\n                            variant: \"outlined\"\n                          })\n                        }), /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsxs(TextField, {\n                            select: true,\n                            fullWidth: true,\n                            label: \"Select a Skill\",\n                            value: skill,\n                            onChange: handleSkillChange,\n                            error: skillError != '',\n                            helperText: skillError,\n                            variant: \"outlined\",\n                            children: [/*#__PURE__*/_jsx(MenuItem, {\n                              value: '---Select---',\n                              children: '---Select---'\n                            }, '0a2'), skills.map(function (option) {\n                              return /*#__PURE__*/_jsx(MenuItem, {\n                                value: option.name,\n                                children: option.name\n                              }, option.id);\n                            })]\n                          })\n                        })]\n                      })\n                    })]\n                  })]\n                }) : /*#__PURE__*/_jsxs(Container, {\n                  component: \"main\",\n                  maxWidth: \"sm\",\n                  className: classes.root,\n                  children: [/*#__PURE__*/_jsx(CssBaseline, {}), /*#__PURE__*/_jsxs(Box, {\n                    className: classes.form,\n                    children: [/*#__PURE__*/_jsx(Typography, {\n                      component: \"h1\",\n                      variant: \"h5\",\n                      children: \"Parameters\"\n                    }), /*#__PURE__*/_jsx(Box, {\n                      className: classes.button,\n                      component: \"form\",\n                      noValidate: true,\n                      sx: {\n                        width: '100%',\n                        // Fix IE11 issue.\n                        mt: 3\n                      },\n                      children: /*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 5,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsx(TextField // className={classes.text}\n                          , {\n                            required: true,\n                            fullWidth: true,\n                            type: \"number\",\n                            value: fp,\n                            error: fpError != '',\n                            helperText: fpError,\n                            onChange: function onChange(Event) {\n                              return setFp(Event.target.value);\n                            } // inputProps={{ min: \"0\", max: \"5\", step: \"0.5\" }}\n                            ,\n                            name: \"foesp\",\n                            label: \"Field of expertise (Skill Points)\",\n                            id: \"foesp\",\n                            variant: \"outlined\"\n                          })\n                        }), /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsx(TextField // className={classes.text}\n                          , {\n                            required: true,\n                            fullWidth: true,\n                            type: \"number\",\n                            value: sp,\n                            error: spError != '',\n                            helperText: spError,\n                            onChange: function onChange(Event) {\n                              return setSp(Event.target.value);\n                            } // inputProps={{ min: \"0\", max: \"5\", step: \"0.5\" }}\n                            ,\n                            name: \"skillsp\",\n                            label: \"Skill Set (Skill Points)\",\n                            id: \"skillspsp\",\n                            variant: \"outlined\"\n                          })\n                        })]\n                      })\n                    })]\n                  }), /*#__PURE__*/_jsx(Button, {\n                    type: \"submit\",\n                    fullWidth: true,\n                    variant: \"contained\",\n                    sx: {\n                      mt: 3,\n                      mb: 2\n                    },\n                    className: classes.button1,\n                    onClick: handleGet,\n                    children: \"Get\"\n                  })]\n                })\n              })\n            }, value);\n          })\n        })\n      })\n    }), filtered.length > 0 && /*#__PURE__*/_jsx(AlignItemsList, {\n      users: filtered\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}